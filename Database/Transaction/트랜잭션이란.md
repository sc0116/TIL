# 트랜잭션의 정의
트랜잭션(Transaction)은 데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업 단위 또는 한꺼번에 수행되어야할 일련의 연산들을 의미한다.

트랜잭션은 작업의 완전성을 보장해준다. 
즉, 논리적인 작업 셋을 모두 완벽하게 처리하거나 또는 처리하지 못할 경우에는 원 상태로 복구해서 작업의 일부만 적용되는 현상(Partial update)이 발생하지 않게 만들어주는 기능이다. 

트랜잭션은 SELECT, UPDATE, INSERT, DELETE와 같은 연산을 수행하여 데이터베이스의 상태를 변환시키는 작업의 단위다.

## 트랜잭션의 성질(ACID)
ACID는 데이터베이스 트랜잭션이 안전하게 수행된다는 것을 보장하기 위한 성질을 가리키는 약어이다.

### Atomicity(원자성)
원자성은 트랜잭션의 연산은 데이터베이스에 모두 반영(COMMIT)되거나 모두 반영되지 않아야(ROLLBACK) 한다는 성질을 나타낸다. 
트랜잭션 내에서 실행한 작업들은 마치 하나의 작업인 것처럼 전부 완벽하게 수행되어야 하며, 어느 하나라도 오류가 발생하면 트랜잭션이 전부 취소되어야 한다.

### Consistency(일관성)
일관성은 트랜잭션 작업 처리 결과가 항상 일관되어야 한다는 성질을 나타낸다. 
시스템이 가지고 있는 고정요소는 트랜잭션 수행 전과 수행 완료 후의 상태가 같아야 한다. 
예를 들어 데이터베이스에서 정한 무결성 제약 조건을 항상 만족해야 한다.

### Isolation(격리성)
격리성은 동시에 실행되는 트랜잭션들이 서로에게 영향을 미치지 않도록 격리한다는 성질을 나타낸다. 
수행 중인 트랜잭션은 완전히 완료될 때까지 다른 트랜잭션에서 수행 결과를 참조할 수 없다.

### Durability(지속성)
지속성은 트랜잭션을 성공적으로 완료하면 그 결과가 항상 기록되어야 한다는 성질을 나타낸다. 
트랜잭션은 그 결과를 비휘발성 저장장치에 저장하는 형태로 보존해야 하며, 트랜잭션을 처리하는 프로그램은 이를 보장해야 한다. 
시스템에 문제가 발생해도 데이터베이스 로그 등을 사용해서 성공한 트랜잭션 내용을 복구해야 한다.

## 트랜잭션의 연산
### COMMIT
하나의 트랜잭션 작업이 정상적으로 끝났고 데이터베이스가 다시 일관된 상태에 있을 때, 이 트랜잭션이 수행한 갱신 연산이 완료된 것을 트랜잭션 관리자에게 알려주는 연산이다.

### ROLLBACK
하나의 트랜잭션 처리가 비정상적으로 종료되어 데이터베이스의 일관성을 깨뜨렸을 때, 
이 트랜잭션의 일부가 정상적으로 처리되었더라도 트랜잭션의 원자성을 구현하기 위해 이 트랜잭션이 수행한 모든 연산을 취소하는 연산이다. 
Rollback을 하는 경우 해당 트랜잭션을 재시작하거나 폐기한다.

## 트랜잭션의 상태
![](https://user-images.githubusercontent.com/47477359/211318901-b823931d-6298-43d2-b795-6c80bba96c5a.png)

- 활동(Active): 트랜잭션이 실행 중인 상태
- 부분 완료(Partially Committed): 트랜잭션의 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태
- 완료(Committed): 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태
- 실패(Failed): 트랜잭션 실행에 오류가 발생하여 중단된 상태
- 철회(Aborted): 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태
