# 아이템 12. toString을 항상 재정의하라

---

## 기본 toString

---

`Object`의 기본 `toString` 메서드는 단순히 **클래스_이름@16진수로_표시한_해시코드**를 반환한다.

```java
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
}
```

## toString의 일반 규약

---

`toString`의 일반 규약에 따르면 **간결하면서 사람이 읽기 쉬운 형태의 유익한 정보**를 반환해야 한다.
- 예) PhoneNumber@adbbd보다 010-1234-5678과 같은 형태가 더 유익하다.

또한, **모든 하위 클래스에서 `toString` 메서드를 재정의하라**고 한다.

### toString 정보

**실전에서 `toString`은 그 객체가 가진 주요 정보 모두를 반환하는 게 좋다.**
- 이상적으로는 스스로를 완벽히 설명하는 문자열이어야 한다.
- 앞에서의 전화번호 예시

하지만 객체가 거대하거나 객체의 상태가 문자열로 표현하기에 적합하지 않다면 요약 정보를 담아야 한다.
- 예) 전화번호부(총 1487536개)

### 반환값의 포맷 문서화

`toString`을 구현할 때면 반환값의 포맷을 문서화할지 선택해야 한다.
- 전화번호나 행렬 같은 값 클래스라면 문서화하기를 권한다.

#### 장점

포맷을 문서화하면 **그 객체는 표준적이고, 명확하고, 사람이 읽을 수 있게 된다.**
- 따라서 그 값 그대로 입출력에 사용하거나 CSV 파일처럼 사람이 읽을 수 있는 데이터 객체로 저장할 수도 있다.

#### 단점

- 포맷을 한번 명시하면 (그 클래스가 많이 쓰인다면) 평생 그 포맷에 얽매이게 된다.
  - 만약 향후 릴리스에서 포맷을 바꾼다면 이를 사용하던 코드들과 데이터들은 엉망이 될 것이다.

**포맷을 문서화하려면 의도를 아주 명확히 밝혀야 한다.**

### API 제공

**`toString`이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공해야 한다.**
- 예) `PhoneNumber` 클래스는 지역 코드, 프리픽스, 가입자 번호용 접근자를 제공해야 한다.
- 그렇지 않으면 이 정보가 필요한 프로그래머는 `toString`의 반환값을 파싱할 수밖에 없다.

## 핵심 정리

---

- 모든 구체 클래스에서 `Object`의 `toString`을 재정의하자.
  - 상위 클래스에서 이미 알맞게 재정의한 경우는 예외다.
- `toString`을 재정의한 클래스는 사용하기도 즐겁고 그 클래스를 사용한 시스템을 디버깅하기 쉽게 해준다.
- `toString`은 해당 객체에 관한 명확하고 유용한 정보를 읽기 좋은 형태로 반환해야 한다.
